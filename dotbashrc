#! /bin/bash

alias vi=vim
alias top='top -o cpu'
alias ctags=/usr/local/bin/ctags
alias rspec=fast_rspec
alias g=git
alias gc='git commit'
alias ga='git add'
alias gst='git status'

function commit() { git add . && git commit -a "$@" && rake; }
function push() { commit "$@" && git push; }

# ruby management
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"
if [ -d "$HOME/.rbenv" ]; then
  export PATH="$HOME/.rbenv/bin:$PATH"
  eval "$(rbenv init -)"
fi

# Rails
function rails_command {
  local cmd=$1
  shift
  if [ -e script/rails ]; then
    script/rails $cmd "$@"
  else
    script/$cmd "$@"
  fi
}
alias ss='rails_command server'
alias sc='rails_command console'

# bash configurations
export HISTCONTROL=ignoredups:erasedups
export HISTSIZE=100000
export HISTFILESIZE=100000
shopt -s histappend
shopt -s autocd
shopt -s globstar
shopt -s checkhash

#readline
bind 'set completion-ignore-case on'
bind 'set skip-completed-text on'
bind 'set show-all-if-ambiguous on'
bind 'set mark-symlinked-directories on'
bind 'set mark-directories on'

# OSX Specific
if [ -f /usr/local/etc/bash_completion ]; then
  . /usr/local/etc/bash_completion
fi
export BUNDLER_EDITOR=sublime
export LC_CTYPE=en_US

# final path setting
export PATH="./bin:~/bin:~/.bin:/usr/local/bin:$PATH"
PS1='[\h \W$(__git_ps1 " (%s)")]Î© '

export HISTIGNORE="*production*"
